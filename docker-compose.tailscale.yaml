version: "3.9"

services:
    tailscale:
        image: tailscale/tailscale:stable
        restart: unless-stopped
        container_name: tailscale
        network_mode: "host"
        privileged: true
        cap_add:
            - NET_ADMIN
            - NET_RAW
            - SYS_MODULE
        devices:
            - /dev/net/tun:/dev/net/tun
        environment:
            - TS_AUTHKEY=<YOUR_TAILSCALE_AUTH_KEY>
            - TS_EXTRA_ARGS=--login-server=https://kire.dedyn.io --advertise-exit-node --advertise-routes=0.0.0.0/0,::/0 --accept-dns=false
            - TS_STATE_DIR=/var/lib/tailscale
            - TS_HOSTNAME=server